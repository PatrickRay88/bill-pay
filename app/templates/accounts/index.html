{% extends 'base.html' %}
{% block content %}
<div class="container py-3">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <h2>Accounts</h2>
    <div>
      <button class="btn btn-sm btn-outline-primary me-2" id="refresh-accounts-btn">Refresh Accounts</button>
      <a href="/dashboard" class="btn btn-sm btn-secondary">Back to Dashboard</a>
    </div>
  </div>
  {% if account_groups %}
    {% for type, accounts in account_groups.items() %}
      <div class="mb-4">
        <h5 class="text-muted text-uppercase">{{ type }}</h5>
        <div class="list-group">
          {% for account in accounts %}
            <a href="{{ url_for('accounts.detail', account_id=account.id) }}" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
              <div>
                <strong>{{ account.name }}</strong>
                {% if account.official_name %}<div class="small text-muted">{{ account.official_name }}</div>{% endif %}
              </div>
              <div class="text-end">
                <div class="fw-bold">{{ account.current_balance or 0 | round(2) }} {{ account.iso_currency_code or 'USD' }}</div>
                {% if account.available_balance %}<div class="small text-muted">Available: {{ account.available_balance | round(2) }}</div>{% endif %}
              </div>
            </a>
          {% endfor %}
        </div>
      </div>
    {% endfor %}
  {% else %}
    <div class="alert alert-info">No accounts yet. Connect a bank from the dashboard.</div>
  {% endif %}
</div>
{% endblock %}
